为什么弃用 stop 和 suspend 方法

初始的 Java 版本定义了一个 stop 方法用来终止一个线程， 以及一个 suspend 方法用来阻
塞一个线程直至另一个线程调用 resume。stop 和 suspend 方法有一些共同点：都试图控制一
个给定线程的行为。

stop、 suspend 和 resume 方法已经弃用。

stop 方法天生就不安全，经验证明 suspend方法会经常导致死锁。

首先来看看 stop 方法， 该方法终止所有未结束的方法， 包括 run 方法。当线程被终止，立即释放
被它锁住的所有对象的锁。这会导致对象处于不一致的状态。

例如:
假定 TransferThread在从一个账户向另一个账户转账的过程中被终止，钱款已经转出，却没有转
人目标账户，现在银行对象就被破坏了。因为锁已经被释放，这种破坏会被其他尚未停止的线程观察到。
当线程要终止另一个线程时， 无法知道什么时候调用 stop 方法是安全的， 什么时候导致
对象被破坏。因此，该方法被弃用了。在希望停止线程的时候应该中断线程， 被中断的线程
会在安全的时候停止。

接下来， 看看 suspend方法有什么问题。与 stop 不同，suspend 不会破坏对象。但是，
如果用 suspend 挂起一个持有一个锁的线程， 那么，该锁在恢复之前是不可用的。 如果调用
suspend 方法的线程试图获得同一个锁， 那么程序死锁： 被挂起的线程等着被恢复， 而将其
挂起的线程等待获得锁。